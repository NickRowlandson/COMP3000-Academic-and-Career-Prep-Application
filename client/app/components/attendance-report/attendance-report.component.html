<div class="">
    <div *ngIf="!data">
        <h1>Attendance Report</h1>
        <hr>
        <div class="cs-loader">
            <div class="cs-loader-inner">
                <label>	L</label>
                <label>	O</label>
                <label>	A</label>
                <label>	D</label>
                <label>	I</label>
                <label>	N</label>
                <label>	G</label>
                <label>	.</label>
                <label>	.</label>
                <label>	.</label>
            </div>
        </div>
    </div>
    <div class="row" *ngIf="data && studentReport">
        <h1>Attendance Report (Student)</h1>
        <p-toggleButton onLabel="Course Report" offLabel="Student Report" [(ngModel)]="studentReport"></p-toggleButton>
        <hr>

        <div class="col-md-3">
          <div class="wrapper2">
            <h2>Students</h2>
            <hr>
            <table class="table table-striped" [mfData]="students | userFilter : filterQuery" #mf="mfDataTable" [mfRowsOnPage]="15">
              <thead>
                <tr>
                  <!-- <th>
                    <mfDefaultSorter by="studentNumber">Student Number</mfDefaultSorter>
                  </th> -->
                  <th>
                    <mfDefaultSorter by="firstName">Name</mfDefaultSorter>
                  </th>
                  <th>Action</th>
                </tr>
                <tr>
                  <th colspan="5">
                    <input placeholder="Filter by student name" class="form-control" [(ngModel)]="filterQuery" />
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let student of mf.data">
                  <td>{{student.firstName + " " + student.lastName}}</td>
                  <td>
                      <button class="btn btn-primary" (click)="viewStudentReport(student, $event)">View Report</button>
                  </td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <td colspan="5">
                    <mfBootstrapPaginator></mfBootstrapPaginator>
                  </td>
                </tr>
              </tfoot>
            </table>
            <div class="push"></div>
        </div>
        <div class="footer">
            <div>
                <button (click)="goBack()" class="btn btn-default">Back</button>
            </div>
        </div>
      </div>
        <div *ngIf="!studentAttendanceView" class="col-md-9">
          <h2>Overall Status</h2>
          <hr>
          <h3>Total student records: {{ data.length }}</h3>
        </div>
        <div *ngIf="studentAttendanceView" class="col-md-9">
          <h2>Report for {{ student.firstName }}</h2>
          <div (click)="overallStatus($event)" class="statusButton" title="View overall status"><i class="fa fa-pie-chart fa-2x" aria-hidden="true"></i></div>
          <hr>
          <h3>Present: {{ totalPresent }} Absent: {{ totalAbsent }} Made Contact: {{ totalMadeContact }}</h3>
          <div *ngIf="noAttendance" style="color:green;"><h2>Student has attended all classes so far!</h2></div>
          <div *ngFor="let info of records">
            <div class="well col-md-12">
              <label class="control-label">Date: </label> {{ info.date | date }}
              <br />
              <label class="control-label">Course Name: </label> {{ info.course[0].courseName }}
              <br />
              <label class="control-label">Attendance:  </label> {{ info.attendanceValue }}
              <br />
            </div>
            <br />
          </div>
        </div>
    </div>
    <div class="row" *ngIf="data && !studentReport">
        <h1>Attendance Report (Course)</h1>
        <p-toggleButton styleClass="viewToggle" onLabel="Course Report" offLabel="Student Report" [(ngModel)]="studentReport"></p-toggleButton>
        <hr>

        <div class="col-md-3">
          <div class="wrapper2">
            <h2>Courses</h2>
            <hr>
            <table class="table table-striped" [mfData]="courses | courseFilter : filterQuery" #mf="mfDataTable" [mfRowsOnPage]="15">
              <thead>
                <tr>
                  <!-- <th>
                    <mfDefaultSorter by="studentNumber">Student Number</mfDefaultSorter>
                  </th> -->
                  <th>
                    <mfDefaultSorter by="courseName">Name</mfDefaultSorter>
                  </th>
                  <th>Action</th>
                </tr>
                <tr>
                  <th colspan="5">
                    <input placeholder="Filter by course name" class="form-control" [(ngModel)]="filterQuery" />
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let course of mf.data">
                  <td>{{course.courseName}}</td>
                  <td>
                      <button class="btn btn-primary" (click)="viewCourseReport(course, $event)">View Report</button>
                  </td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <td colspan="5">
                    <mfBootstrapPaginator></mfBootstrapPaginator>
                  </td>
                </tr>
              </tfoot>
            </table>
            <div class="push"></div>
        </div>
        <div class="footer">
            <div>
                <button (click)="goBack()" class="btn btn-default">Back</button>
            </div>
        </div>
      </div>
        <div *ngIf="!courseAttendanceView" class="col-md-9">
          <h2>Overall Status</h2>
          <hr>
          <h3>Total student records: {{ data.length }}</h3>
        </div>
        <div *ngIf="courseAttendanceView" class="col-md-9">
          <h2>{{ course.courseName }} Report</h2>
          <div (click)="overallStatus($event)" class="statusButton" title="View overall status"><i class="fa fa-pie-chart fa-2x" aria-hidden="true"></i></div>
          <hr>
        </div>
    </div>
</div>
